<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>search for company!</title>
    <style>
        :root {
            --brand-color: #1a73e8;
            --bg-color: #f8f9fa;
            --sidebar-bg: #ffffff;
            --border-color: #dadce0;
            --text-main: #202124;
            --text-sub: #5f6368;
            --hover-color: #f1f3f4;
            --active-blue: #e8f0fe;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0;
            display: flex;
            height: 100vh;
        }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        #sidebar {
            width: 320px;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .brand-logo {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--brand-color);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .add-btn {
            background: var(--brand-color);
            color: white;
            border: none;
            padding: 14px;
            border-radius: 28px;
            cursor: pointer;
            font-weight: 500;
            box-shadow: 0 1px 3px rgba(60,64,67,0.3);
            margin-bottom: 25px;
            transition: all 0.2s;
            text-align: center;
        }
        .add-btn:hover { background-color: #185abc; }

        #companyList {
            list-style: none;
            padding: 0;
            margin: 0;
            overflow-y: auto;
            flex-grow: 1;
        }

        .company-item {
            padding: 12px 20px;
            border-radius: 0 24px 24px 0;
            margin-right: -20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-sub);
            margin-bottom: 4px;
        }
        .company-item:hover { background-color: var(--hover-color); }
        .company-item.active { background-color: var(--active-blue); color: var(--brand-color); font-weight: bold; }

        .delete-icon { font-size: 18px; opacity: 0.4; }
        .delete-icon:hover { color: #d93025; opacity: 1; }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        #main {
            flex-grow: 1;
            padding: 30px 50px;
            overflow-y: auto;
            display: none;
        }

        /* ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚¬ã‚¤ãƒ‰ */
        .step-guide {
            background: #e7f3ff;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            font-size: 0.9rem;
            border-left: 5px solid var(--brand-color);
            line-height: 1.6;
        }

        .header-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }

        .comp-title { font-size: 1.8rem; margin: 0; }

        .card {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 1px 2px rgba(60,64,67,0.3);
        }

        /* å…¥åŠ›UI */
        .field-group { margin-bottom: 25px; }
        label { display: block; font-size: 0.85rem; color: var(--text-main); margin-bottom: 8px; font-weight: 600; }
        .sub-label { display: block; font-size: 0.75rem; color: var(--text-sub); margin-bottom: 8px; line-height: 1.4; }
        input, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.95rem;
            box-sizing: border-box;
            background: #fafafa;
        }
        textarea { height: 110px; resize: vertical; }

        /* SWOTã‚°ãƒªãƒƒãƒ‰ */
        .swot-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .swot-box { padding: 15px; border-radius: 8px; border: 1px solid var(--border-color); }
        .swot-box.s { border-top: 5px solid #34a853; }
        .swot-box.w { border-top: 5px solid #ea4335; }
        .swot-box.o { border-top: 5px solid #4285f4; }
        .swot-box.t { border-top: 5px solid #fbbc05; }

        .tab-menu { display: flex; gap: 30px; margin-bottom: 25px; border-bottom: 1px solid var(--border-color); }
        .tab-item { cursor: pointer; color: var(--text-sub); padding-bottom: 10px; font-weight: 500; border-bottom: 3px solid transparent; }
        .tab-item.active { color: var(--brand-color); border-bottom-color: var(--brand-color); }
        .tab-pane { display: none; }
        .tab-pane.active { display: block; }

        .save-btn-container { position: sticky; bottom: 0; background: rgba(248, 249, 250, 0.95); padding: 20px 0; text-align: right; border-top: 1px solid #ddd; }
        .btn-primary { background: var(--brand-color); color: white; border: none; padding: 12px 40px; border-radius: 8px; cursor: pointer; font-weight: 600; }
        
        .share-controls { margin-top: 10px; display: flex; gap: 5px; }
        .btn-outline { flex: 1; background: transparent; border: 1px solid var(--border-color); color: var(--text-sub); padding: 8px; border-radius: 4px; font-size: 11px; cursor: pointer; }
    </style>
</head>
<body>

<div id="sidebar">
    <div class="brand-logo">ğŸ” search for company!</div>
    <button class="add-btn" onclick="addNew()">ï¼‹ ä¼æ¥­ã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ </button>
    
    <ul id="companyList"></ul>
    
    <div style="padding: 15px 0; border-top: 1px solid #eee;">
        <label style="font-size: 11px; color: var(--text-sub); margin-bottom: 8px; display: block;">ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å…±æœ‰</label>
        <div class="share-controls">
            <button class="btn-outline" onclick="exportData()">ğŸ“¤ æ›¸ãå‡ºã—</button>
            <button class="btn-outline" onclick="document.getElementById('importFile').click()">ğŸ“¥ èª­ã¿è¾¼ã¿</button>
        </div>
        <input type="file" id="importFile" onchange="importData(event)" accept=".json">
    </div>
</div>

<div id="main">
    <div id="guide" class="step-guide">
        <strong>ğŸ’¡ ä½¿ã„æ–¹ã®ã‚¬ã‚¤ãƒ‰:</strong> <br>
        1. ä¼æ¥­ã”ã¨ã«ã€Œä¼æ¥­æ¦‚è¦ã€ã‚’å…¥åŠ›ã—ã€å…¬å¼ã‚µã‚¤ãƒˆã‚’ã™ãè¦‹ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚<br>
        2. ã€Œè‡ªå·±åˆ†æãƒ»è»¸ã€ã‚¿ãƒ–ã§ã€ãã®ä¼æ¥­ã«å‘ã‘ãŸã‚ãªãŸã®è€ƒãˆã‚’æ•´ç†ã—ã¾ã™ã€‚<br>
        3. 3Cã‚„SWOTã‚’ä½¿ã£ã¦ã€Œä¸–ã®ä¸­ã®å‹•ãï¼ˆå•ã„ï¼‰ã€ã«å¯¾ã—ã€Œè‡ªåˆ†ã®æ­¦å™¨ï¼ˆç­”ãˆï¼‰ã€ã‚’ã©ã†ã¶ã¤ã‘ã‚‹ã‹è¨€èªåŒ–ã—ã¾ã—ã‚‡ã†ã€‚
    </div>

    <div class="header-section">
        <h1 id="displayTitle" class="comp-title">ä¼æ¥­å</h1>
        <a id="hpLink" href="#" target="_blank" style="color: var(--brand-color); font-weight: 600; text-decoration: none; display: none;">ğŸŒ å…¬å¼ã‚µã‚¤ãƒˆã‚’é–‹ã â†—</a>
    </div>

    <div class="card">
        <div class="tab-menu">
            <div class="tab-item active" onclick="switchTab(event, 'tab1')">ä¼æ¥­æ¦‚è¦</div>
            <div class="tab-item" onclick="switchTab(event, 'tab2')">è‡ªå·±åˆ†æãƒ»è»¸</div>
            <div class="tab-item" onclick="switchTab(event, 'tab3')">3Cåˆ†æ</div>
            <div class="tab-item" onclick="switchTab(event, 'tab4')">SWOTåˆ†æ</div>
            <div class="tab-item" onclick="switchTab(event, 'tab5')">ã‚­ãƒ£ãƒªã‚¢ãƒ»ãƒ¡ãƒ¢</div>
        </div>

        <div id="tab1" class="tab-pane active">
            <div class="field-group">
                <label>å…¬å¼ã‚µã‚¤ãƒˆ URL</label>
                <input type="text" id="compUrl" placeholder="https://..." onchange="updateHp()">
            </div>
            <div class="field-group"><label>ç†å¿µãƒ»ãƒ“ã‚¸ãƒ§ãƒ³</label><textarea id="vision" placeholder="ä¼æ¥­ã®æ²ã’ã‚‹ç›®æ¨™ã‚„ç¤¾ä¼šçš„ãªå½¹å‰²"></textarea></div>
            <div class="field-group"><label>äº‹æ¥­å†…å®¹ãƒ»å¼·ã¿</label><textarea id="business" placeholder="ä¸»è¦ãªã‚µãƒ¼ãƒ“ã‚¹ã€åç›Šãƒ¢ãƒ‡ãƒ«ã€ç‹¬è‡ªã®æŠ€è¡“ãªã©"></textarea></div>
        </div>

        <div id="tab2" class="tab-pane">
            <div class="field-group">
                <label>å°±æ´»è»¸</label>
                <span class="sub-label">ä¼æ¥­é¸ã³ã§çµ¶å¯¾ã«è­²ã‚Œãªã„æ¡ä»¶ã¯ä½•ã§ã™ã‹ï¼Ÿ</span>
                <textarea id="my_axis"></textarea>
            </div>
            <div class="field-group">
                <label>è‡ªå·±PR</label>
                <span class="sub-label">ã‚ãªãŸã®æœ€å¤§ã®å¼·ã¿ã¯ä½•ã§ã™ã‹ï¼Ÿ</span>
                <textarea id="my_pr"></textarea>
            </div>
            <div class="field-group">
                <label>å­¦ç”Ÿæ™‚ä»£ã«æœ€ã‚‚åŠ›ã‚’å…¥ã‚ŒãŸã“ã¨ï¼ˆãŒãã¡ã‹ï¼‰</label>
                <span class="sub-label">å…·ä½“çš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã¨å¾—ã‚‰ã‚ŒãŸæˆæœã€‚</span>
                <textarea id="my_gakuchika"></textarea>
            </div>
            <div class="field-group">
                <label>å›°é›£ã«ç›´é¢ã—ãŸã“ã¨</label>
                <span class="sub-label">ç›´é¢ã—ãŸå£ã¨ã€ãã‚Œã‚’ã©ã†ä¹—ã‚Šè¶ŠãˆãŸã‹ã€‚</span>
                <textarea id="my_hardship"></textarea>
            </div>
        </div>

        <div id="tab3" class="tab-pane">
            <span class="sub-label" style="margin-bottom: 15px; display: block;">ç«¶åˆä»–ç¤¾ã¨æ¯”è¼ƒã—ã€ãã®ä¼æ¥­ã®ã€Œç‹¬è‡ªæ€§ã€ã‚’è¦‹ã¤ã‘ã¾ã™ã€‚</span>
            <div class="field-group"><label>Customer (å¸‚å ´ãƒ»é¡§å®¢ã®æ‚©ã¿)</label><textarea id="customer"></textarea></div>
            <div class="field-group"><label>Competitor (ç«¶åˆä»–ç¤¾ã®å‹•å‘)</label><textarea id="competitor"></textarea></div>
            <div class="field-group"><label>Company (ãã®ä¼æ¥­ç‹¬è‡ªã®å¼·ã¿)</label><textarea id="company_strength"></textarea></div>
        </div>

        <div id="tab4" class="tab-pane">
            <span class="sub-label" style="margin-bottom: 15px; display: block; font-weight: bold; color: #d93025;">â€»ã€Œæ©Ÿä¼šãƒ»è„…å¨ã€ã¯ã€è‡ªç¤¾ã®åŠ›ã§ã¯å¤‰ãˆã‚‰ã‚Œãªã„ã€Œå¤–ã®ä¸–ç•Œã®å‹•ãã€ã‚’è¨˜å…¥ã—ã¾ã™ã€‚</span>
            <div class="swot-grid">
                <div class="swot-box s">
                    <label>Strength (å¼·ã¿)</label>
                    <span class="sub-label"><strong>ã€Œã€‡ã€‡ãªã‚‰ã€ä»–ç¤¾ï¼ˆä»–è€…ï¼‰ã«è² ã‘ã¾ã›ã‚“ï¼ã€</strong></span>
                    <textarea id="s" placeholder="ã€å†…éƒ¨è¦å› ã€‘ç‹¬è‡ªã®æŠ€è¡“ã€å„ªç§€ãªäººæã€ãƒ–ãƒ©ãƒ³ãƒ‰åŠ›ãªã©"></textarea>
                </div>
                <div class="swot-box w">
                    <label>Weakness (å¼±ã¿)</label>
                    <span class="sub-label"><strong>ã€Œä»Šã¯ã¾ã ã€‡ã€‡ãŒè¶³ã‚Šãªã„ã®ã§ã€å¼·åŒ–ãŒå¿…è¦ã§ã™ã€‚ã€</strong></span>
                    <textarea id="w" placeholder="ã€å†…éƒ¨è¦å› ã€‘ä¸è¶³ã—ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã€æ”¹å–„ã™ã¹ãèª²é¡Œãªã©"></textarea>
                </div>
                <div class="swot-box o">
                    <label>Opportunity (æ©Ÿä¼š)</label>
                    <span class="sub-label"><strong>ã€Œä»Šã€ä¸–ã®ä¸­ã§ã¯ã€‡ã€‡ãŒæµè¡Œã£ã¦ã„ã¦ã€ãƒãƒ£ãƒ³ã‚¹ã§ã™ã€‚ã€</strong></span>
                    <textarea id="o" placeholder="ã€å¤–éƒ¨è¦å› ã€‘DXã®åŠ é€Ÿã€æ³•æ”¹æ­£ã€å¸‚å ´ã®æ‹¡å¤§ãªã©ãƒ“ã‚¸ãƒã‚¹ã®è¿½ã„é¢¨ã€‚"></textarea>
                </div>
                <div class="swot-box t">
                    <label>Threat (è„…å¨)</label>
                    <span class="sub-label"><strong>ã€Œä¸–ã®ä¸­ã§ã€‡ã€‡ã¨ã„ã†å¤‰åŒ–ãŒã‚ã‚Šã€ã“ã®ã¾ã¾ã ã¨å±ãªã„ã§ã™ã€‚ã€</strong></span>
                    <textarea id="t" placeholder="ã€å¤–éƒ¨è¦å› ã€‘ç«¶åˆã®å‚å…¥ã€å°‘å­é«˜é½¢åŒ–ã€åŸææ–™ã®é«˜é¨°ãªã©ãƒ“ã‚¸ãƒã‚¹ã®é€†é¢¨ã€‚"></textarea>
                </div>
            </div>
        </div>

        <div id="tab5" class="tab-pane">
            <div class="field-group">
                <label>ã“ã®ä¼æ¥­ã§ã®ã‚­ãƒ£ãƒªã‚¢ãƒ‘ã‚¹</label>
                <span class="sub-label">å…¥ç¤¾å¾Œã€3å¹´å¾Œã€5å¹´å¾Œã«ã©ã®ã‚ˆã†ãªè·ç¨®ã‚„å½¹å‰²ã«å°±ããŸã„ã‹ã€‚</span>
                <textarea id="career_path"></textarea>
            </div>
            <div class="field-group">
                <label>ä¼æ¥­åˆ¥ãƒ¡ãƒ¢ / é¸è€ƒãƒ­ã‚°</label>
                <span class="sub-label">é¢æ¥ã®æŒ¯ã‚Šè¿”ã‚Šã‚„ã€OBè¨ªå•ã§èã„ãŸç”Ÿã®å£°ã€‚</span>
                <textarea id="company_memo"></textarea>
            </div>
        </div>

        <div class="save-btn-container">
            <button class="btn-primary" onclick="doSave()">ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜</button>
        </div>
    </div>
</div>

<script>
    const storageKey = 'search_for_company_v2';
    let dataStore = JSON.parse(localStorage.getItem(storageKey) || '{}');
    let activeId = null;

    // ä¿å­˜å¯¾è±¡ã®å…¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
    const fields = [
        'compUrl', 'vision', 'business', 
        'my_axis', 'my_pr', 'my_gakuchika', 'my_hardship',
        'customer', 'competitor', 'company_strength', 
        's', 'w', 'o', 't', 
        'career_path', 'company_memo'
    ];

    function refreshSidebar() {
        const list = document.getElementById('companyList');
        list.innerHTML = '';
        Object.keys(dataStore).sort().forEach(id => {
            const li = document.createElement('li');
            li.className = `company-item ${id === activeId ? 'active' : ''}`;
            li.innerHTML = `<span>ğŸ¢ ${id}</span> <span class="delete-icon" onclick="doDelete('${id}')">Ã—</span>`;
            li.onclick = (e) => { if(!e.target.classList.contains('delete-icon')) loadComp(id); };
            list.appendChild(li);
        });
    }

    function addNew() {
        const name = prompt("åˆ†æã—ãŸã„ä¼æ¥­åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        if (name && !dataStore[name]) {
            dataStore[name] = {};
            fields.forEach(f => dataStore[name][f] = '');
            loadComp(name);
        } else if (dataStore[name]) {
            alert('ãã®ä¼æ¥­ã¯æ—¢ã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™');
        }
    }

    function loadComp(id) {
        activeId = id;
        document.getElementById('main').style.display = 'block';
        document.getElementById('displayTitle').innerText = id;
        fields.forEach(f => document.getElementById(f).value = dataStore[id][f] || '');
        updateHp();
        refreshSidebar();
    }

    function updateHp() {
        const val = document.getElementById('compUrl').value;
        const btn = document.getElementById('hpLink');
        if (val) {
            btn.href = val.startsWith('http') ? val : 'https://' + val;
            btn.style.display = 'inline-block';
        } else { btn.style.display = 'none'; }
    }

    function doSave() {
        if (!activeId) return;
        fields.forEach(f => dataStore[activeId][f] = document.getElementById(f).value);
        localStorage.setItem(storageKey, JSON.stringify(dataStore));
        alert('ã€Œ' + activeId + 'ã€ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã—ãŸ');
    }

    function doDelete(id) {
        event.stopPropagation();
        if (confirm(id + ' ã‚’ãƒªã‚¹ãƒˆã‹ã‚‰å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
            delete dataStore[id];
            localStorage.setItem(storageKey, JSON.stringify(dataStore));
            if (activeId === id) document.getElementById('main').style.display = 'none';
            refreshSidebar();
        }
    }

    function switchTab(e, tabId) {
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab-item').forEach(i => i.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        e.target.classList.add('active');
    }

    function exportData() {
        const dataStr = JSON.stringify(dataStore, null, 2);
        const blob = new Blob([dataStr], {type: "application/json"});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = `shukatsu-note-${new Date().toISOString().slice(0,10)}.json`;
        a.click();
    }

    function importData(event) {
        const file = event.target.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                dataStore = JSON.parse(e.target.result);
                localStorage.setItem(storageKey, JSON.stringify(dataStore));
                refreshSidebar();
                alert('ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
            } catch (err) {
                alert('ã‚¨ãƒ©ãƒ¼ï¼šãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“');
            }
        };
        reader.readAsText(file);
    }

    refreshSidebar();
</script>
</body>
</html>
